<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Z3R0D4RKF0RTY</title>
        <link rel="icon" href="./src/images/favicon.png">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <!-- <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet"> -->
        <link rel="stylesheet" href="./src/css/app.css">
        <link rel="manifest" href="./manifest.json">
    </head>

    <body>

       <div class="nav-toggle">
            <div class="nav-toggle-bar"></div>
        </div>
       
        <nav class="nav">
            <ul>
                <li><a href="#" onclick="nightMode(event); event.preventDefault();">Home</a></li>
                <li><a href="#">Home</a></li>
                <li><a href="#">Home</a></li>
                <li><a href="#">Home</a></li>
                <li><a href="#">Home</a></li>
            </ul>
        </nav>

        <div class="nav-toggle-right">
            <div class="nav-toggle-bar-right"></div>
        </div>

        <div class="arrow" id="arrow-routes"></div>

        <nav class="nav-right">
            <div class="container" id="rightPanel">
                <div class="row">
                    <div class="col">
                        <h1 class="mt-4">Routes</h1>
                    </div>
                </div>
                <div class="routePanel row m-1 my-5" id="route1" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf1
                    </div>
                </div>

                <div class="routePanel row m-1 my-5" id="route2" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf2
                    </div>
                </div>

                <div class="routePanel row m-1 my-5" id="route3" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf3
                    </div>
                </div>

                <div class="routePanel row m-1 my-5" id="route4" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf4
                    </div>
                </div>

                <div class="routePanel row m-1 my-5" id="route5" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf5
                    </div>
                </div>

                <div class="routePanel row m-1 my-5" id="route6" onclick="openRoute(this);">
                    <div class="col-6 p-0">
                        <img src="./src/images/modes/uber.png" alt="Uber" class="minify-icons" id="uber">
                        <img src="./src/images/modes/bus.png" alt="Bus" class="minify-icons" id="bus">
                        <img src="./src/images/modes/walking.png" alt="Walking" class="minify-icons" id="walk">
                        <img src="./src/images/modes/metro.png" alt="Metro" class="minify-icons" id="metro">
                    </div>
                    <div class="routeText col-3 p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="price">₹1000</span></div><div class="routeText2 col-3 text-muted small p-0"><span style="position: absolute; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%);" id="time">12h36m</span></div>
                    <div class="col-12" id="routeData" onclick="closeRoute(this);">
                        sdasfasfasfasfasf6
                    </div>
                </div>

                
            </div>
        </nav>

        <input id="pac-input1" class="controls search-bar" type="text" placeholder="">

        <input id="pac-input2" class="controls search-bar" style="" type="text" placeholder="Destination">

        <div id="map_canvas"></div>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9d8y-4zZB9_0ZOn6Pk3AjAWxlBd_J168&callback=initialize&libraries=geometry,places" type="text/javascript"></script>
        <script src="./src/js/jquery-3.3.1.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <script src="./src/js/nav.js"></script>
        <script src="./src/js/app.js"></script>

        <script type="text/javascript">
            
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(getPosition);
            } else { 
                userPos = null;
            }

            function getPosition(position) {
                origPos = [position.coords.latitude, position.coords.longitude];
                userPos = [position.coords.latitude, position.coords.longitude];
            }

            var origPos;
            var map;
            var delhiCenter;
            var userPos;
            var childrenList = $("#rightPanel").children();
            var tester = true;
            var rightMenuAndBar = {
                
                navToggle: document.querySelector('.nav-toggle-right'),
                nav: document.querySelector('.nav-right'),
                
                doToggle: function() {
                    this.navToggle.classList.toggle('expanded-right');
                    this.nav.classList.toggle('expanded-right');
                    document.querySelector("#pac-input1").classList.toggle("moveLeft");
                    document.querySelector("#pac-input2").classList.toggle("moveLeft");
                }
        
            };

            function initialize() {
                if(userPos == null){
                    delhiCenter = new google.maps.LatLng(28.543376, 77.193018);
                    userPos = delhiCenter;    
                }
                else{
                    userPos = new google.maps.LatLng(userPos[0], userPos[1]);
                }
                
                map = new google.maps.Map(
                
                document.getElementById("map_canvas"), 
                {
                    center: userPos,
                    zoom: 13,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    disableDefaultUI: true,
                    styles: [
                      {
                        "featureType": "poi",
                        "elementType": "labels.text",
                        "stylers": [
                          {
                            "visibility": "off"
                          }
                        ]
                      },
                      {
                        "featureType": "poi.business",
                        "stylers": [
                          {
                            "visibility": "off"
                          }
                        ]
                      },
                      {
                        "featureType": "road",
                        "elementType": "labels.icon",
                        "stylers": [
                          {
                            "visibility": "off"
                          }
                        ]
                      },
                      {
                        "featureType": "transit",
                        "stylers": [
                          {
                            "visibility": "off"
                          }
                        ]
                      }
                    ]
                });

                var marker = new google.maps.Marker({
                    position: userPos,
                    map: map,
                    title: 'Your Location'
                });

                var input1 = document.getElementById('pac-input1');
                var input2 = document.getElementById('pac-input2');
                var searchBox1 = new google.maps.places.SearchBox(input1);
                var searchBox2 = new google.maps.places.SearchBox(input2);
                
                input1.placeholder = "Your Location";
                
                map.addListener('bounds_changed', function() {
                    searchBox1.setBounds(map.getBounds());
                    searchBox2.setBounds(map.getBounds());
                });

                var markers1 = [];
                var markers2 = [];
                var bounds = new google.maps.LatLngBounds();
                
                searchBox1.addListener('places_changed', function() {
                
                    var places = searchBox1.getPlaces();

                    if (places.length == 0) {
                        return;
                    }

                    markers1.forEach(function(marker) {
                        marker.setMap(null);
                    });
              
                    markers1 = [];

                    bounds = new google.maps.LatLngBounds();
              
                    places.forEach(function(place) {
                        if (!place.geometry) {
                            console.log("Returned place contains no geometry");
                            return;
                        }

                        markers1.push(new google.maps.Marker({
                            map: map,
                            title: place.name,
                            position: place.geometry.location
                        }));

                        if (place.geometry.viewport) {
                            bounds.union(place.geometry.viewport);
                        } else {
                            bounds.extend(place.geometry.location);
                        }
                    });

                    marker.setMap(null);
                    
                    map.fitBounds(bounds);
                
                });

                searchBox2.addListener('places_changed', function() {
                
                    var places = searchBox2.getPlaces();

                    if (places.length == 0) {
                        return;
                    }

                    markers2.forEach(function(marker) {
                        marker.setMap(null);
                    });
              
                    markers2 = [];

                    places.forEach(function(place) {
                        if (!place.geometry) {
                            console.log("Returned place contains no geometry");
                            return;
                        }

                        markers2.push(new google.maps.Marker({
                            map: map,
                            title: place.name,
                            position: place.geometry.location
                        }));

                        if (place.geometry.viewport) {
                            bounds.union(place.geometry.viewport);
                        } else {
                            bounds.extend(place.geometry.location);
                        }
                    });
                    
                    map.fitBounds(bounds);
                    rightMenuAndBar.doToggle();
                
                });

                $("#pac-input1").on("focus", function() {
                    document.querySelector('.nav-toggle').classList.remove('expanded');
                    document.querySelector('nav').classList.remove('expanded');
                    rightMenuAndBar.navToggle.classList.remove('expanded-right');
                    rightMenuAndBar.nav.classList.remove('expanded-right');
                    document.querySelector("#pac-input1").classList.remove("moveLeft");
                    document.querySelector("#pac-input2").classList.remove("moveLeft");
                });

                $("#pac-input2").on("focus", function() {
                    document.querySelector('.nav-toggle').classList.remove('expanded');
                    document.querySelector('nav').classList.remove('expanded');
                    rightMenuAndBar.navToggle.classList.remove('expanded-right');
                    rightMenuAndBar.nav.classList.remove('expanded-right');
                    document.querySelector("#pac-input1").classList.remove("moveLeft");
                    document.querySelector("#pac-input2").classList.remove("moveLeft");
                });

                $(".nav-toggle").on("click", function() {
                    rightMenuAndBar.navToggle.classList.remove('expanded-right');
                    rightMenuAndBar.nav.classList.remove('expanded-right');
                    document.querySelector("#pac-input1").classList.remove("moveLeft");
                    document.querySelector("#pac-input2").classList.remove("moveLeft");
                });

                var rightOpen = false;

                $("#arrow-routes").on("click", function() {
                    if(!rightOpen){
                        document.querySelector('.nav-toggle').classList.remove('expanded');
                        document.querySelector('nav').classList.remove('expanded');
                        rightMenuAndBar.navToggle.classList.add('expanded-right');
                        rightMenuAndBar.nav.classList.add('expanded-right');
                        document.querySelector("#pac-input1").classList.remove("moveLeft");
                        document.querySelector("#pac-input2").classList.remove("moveLeft");
                    }
                    else{
                        document.querySelector('.nav-toggle').classList.remove('expanded');
                        document.querySelector('nav').classList.remove('expanded');
                        rightMenuAndBar.navToggle.classList.remove('expanded-right');
                        rightMenuAndBar.nav.classList.remove('expanded-right');
                        document.querySelector("#pac-input1").classList.remove("moveLeft");
                        document.querySelector("#pac-input2").classList.remove("moveLeft");
                    }
                    rightOpen = !rightOpen;
                });

                // var bounds = new google.maps.LatLngBounds();

                // var jsonData = {
                //     "overview_polyline" : {
                //         "points" : "erwmDowxvMYaA[wAoAyFg@_CEa@AODa@Hu@TcB?YAIHIbBm@nCy@zFsB`IqCbA[rEwAk@iCu@}CESnDkAhC_ArCy@hCo@HBVNx@hDl@zB~FuBhBkAj@dCnEbRrBxIdAbEQHb@nBd@hBxAjGlGbXbKfc@h@|BpApEzAvEVl@jBvDx@pA`BfCdAxAv@dAdAdApBfBtB`BtBjBdClB~HbH~CtC`CtB`B`B|@fAp@`ApAnBl@~@v@xA|@pB|@`Cp@rBnE`MjCtHNh@|DbL`BjE~@vBfBbD~G`S~CbJfCzHtClJzA|ELXjAjA`Bj@h@Dv@@|EkAp@C~@SpJwB|Be@vOeDzD}@|IuBjCs@hAk@`As@`Aw@Zc@Zk@|IsPxAiClBwCvCkE~@yAP]ZgAVwA^kFXaBZy@Xk@l@}@r@k@t@a@j@Qf@Gd@D\LZRPTRf@Hb@@p@Il@w@nDEj@@d@D\Tn@Vd@Hb@lAvAvBdCV^f@t@v@tAtElInAdChDhG^|@~BhEvDvGlCpEpBxCjAzAbAxAp@jBd@bAt@hAdAhAjAt@lAd@RE^H`Bl@rAj@tAj@~CxAfA`AZ^^n@n@rA\`BJdAFfBTXZNXBhDSt@ClA?bAKn@MPI\[TYh@gATu@Ly@f@yHFqAIqJ?uFEeFJiALg@nAeDbBmEj@eA|@kAnCeC~EoEnDqCnB{Ap@q@jAmA|@u@x@o@`Ak@~@e@b@Ug@_BgCqGAMBOXMVIF@HTh@zAfEwCHOLAH@HFDH?LALH\PNF@nCGjG[FOLIN?LHFNAPCHpBClAE~@]XC^?n@OdCeAvB}@hAi@lFcCt@a@lA_@XM{@sB_@eAc@_Am@kAOc@Qo@OYJI"
                //     }
                // };
                
                // var path = google.maps.geometry.encoding.decodePath(jsonData.overview_polyline.points);
                
                // for (var i = 0; i < path.length; i++) {
                //     bounds.extend(path[i]);
                // }
        
                // var polyline = new google.maps.Polyline({
                //     path: path,
                //     strokeColor: '#FF0000',
                //     strokeOpacity: 0.8,
                //     strokeWeight: 8,
                //     fillColor: '#FF0000',
                //     fillOpacity: 0.35,
                //     map: map
                //     // strokeColor: "#0000FF",
                //     // strokeOpacity: 1.0,
                //     // strokeWeight: 2
                // });
                // polyline.setMap(map);
                // map.fitBounds(bounds);            
            
            }
        
        </script>

    </body>

</html>